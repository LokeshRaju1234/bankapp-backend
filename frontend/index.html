<!DOCTYPE html>
<html>
  <head>
    <title>Banking Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <!-- added new -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script src="loader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="auth-helper.js"></script>
    <script defer src="script.js"></script>
    <script defer src="dashboard.js"></script>
  </head>

  <body>
    <!-- added new -->
    <!-- GLOBAL LOADER -->
    <div id="globalLoader" class="loader-overlay hidden">
  <div id="lottieLoader"></div>
</div>

    <div class="sidebar">
      <h2>üè¶ Bank App</h2>
      <button onclick="getAccounts()">Dashboard</button>
      <button onclick="scrollToSection('createSec')">Create Account</button>
      <button onclick="scrollToSection('updateSec')">Update Account</button>
      <button onclick="scrollToSection('deleteSec')">Delete</button>
      <button onclick="scrollToSection('patchSec')">Patch</button>
      <button onclick="scrollToSection('transSec')">Deposit/Withdraw</button>
      <button onclick="scrollToSection('transferSec')">Transfer</button>
      <button onclick="scrollToSection('historySec')">Transactions</button>
      <button onclick="logout()" style="background: red; margin-top: 20px">
        Logout
      </button>
    </div>

    <div class="main">
      <h1>Bank Dashboard</h1>

      <div class="card">
        <button class="btn-primary" onclick="getAccounts()">
          Fetch All Accounts
        </button>
        <canvas id="balanceChart"></canvas>
        <!-- <p id="output"></p> -->
        <div id="output" class="accounts-grid"></div>
        <!-- Added: User Account ID display -->
        <div id="userAccountIdBox" style="display: none"></div>
      </div>

      <hr />

      <!-- CREATE ACCOUNT -->
      <section id="createSec" class="card">
        <h2>Create New Account</h2>
        <input type="text" id="newName" placeholder="Name" />
        <input type="text" id="newAccNo" placeholder="Account Number" />
        <input type="number" id="newBalance" placeholder="Balance" />
        <input type="text" id="newType" placeholder="Account Type" />
        <input type="text" id="newIfsc" placeholder="IFSC Code" />
        <button onclick="createAccount()">Create</button>
        <p id="createOutput"></p>
      </section>

      <!-- DELETE -->
      <section id="deleteSec" class="card">
        <h2>Delete Account</h2>
        <input type="number" id="deleteId" placeholder="Account ID" />
        <button onclick="deleteAccount()">Delete</button>
        <p id="deleteOutput"></p>
      </section>

      <!-- UPDATE -->
      <section id="updateSec" class="card">
        <h2>Update Account (PUT)</h2>
        <input type="number" id="updateId" placeholder="ID" />
        <input type="text" id="updateName" placeholder="Name" />
        <input type="number" id="updateAccNo" placeholder="Account Number" />
        <input type="number" id="updateBalance" placeholder="Balance" />
        <input type="text" id="updateType" placeholder="Account Type" />
        <input type="text" id="updateIfsc" placeholder="IFSC Code" />
        <button onclick="updateAccount()">Update</button>
      </section>

      <!-- PATCH -->
      <section id="patchSec" class="card">
        <h2>Patch Account</h2>
        <input type="number" id="patchId" placeholder="ID" />
        <input type="text" id="patchName" placeholder="Name" />
        <input type="number" id="patchBalance" placeholder="Balance" />
        <button onclick="patchAccount()">Patch</button>
      </section>

      <!-- Deposit / Withdraw -->
      <section id="transSec" class="card">
        <h2>Deposit / Withdraw</h2>
        <input type="number" id="accountId" placeholder="Account ID" />
        <input type="number" id="amount" placeholder="Amount" />
        <button onclick="deposit()">Deposit</button>
        <button onclick="withdraw()">Withdraw</button>
      </section>

      <!-- Transfer -->
      <section id="transferSec" class="card">
        <h2>Transfer</h2>
        <input type="number" id="fromId" placeholder="From Account" />
        <input type="number" id="toId" placeholder="To Account" />
        <input type="number" id="transferAmount" placeholder="Amount" />
        <button onclick="transfer()">Transfer</button>
      </section>

      <!-- Transaction History -->
      <section id="historySec" class="card">
        <h2>Transactions</h2>
        <input type="number" id="transAccountId" placeholder="Account ID" />
        <button onclick="getTransactions()">View</button>
        <p id="transactionOutput"></p>
      </section>
    </div>

    <script>
      function scrollToSection(id) {
        document.getElementById(id).scrollIntoView({ behavior: "smooth" });
      }
    </script>
  </body>
</html>
